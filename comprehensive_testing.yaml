# Image Collage Generator Configuration
# Comprehensive Testing Configuration - Overnight Run for Complete Feature Testing
# Designed to thoroughly test all metrics, diagnostic plots, lineage tracking, and resume functionality
# Expected runtime: 6-12 hours depending on hardware
# Generated: 2025-09-18 for comprehensive system validation
# Documentation: https://docs.anthropic.com/claude-code

# === BASIC SETTINGS ===
basic_settings:
  grid_size: [15, 20] #[60, 80]               # 4800 tiles - substantial complexity, preserves 4:3 aspect ratio
  tile_size: [32, 32]               # Standard tile size for good detail
  allow_duplicate_tiles: false      # NO duplicates - forces diverse solutions and lineage complexity
  random_seed: 12345                # Different seed from showcase for independent validation
  enable_lineage_tracking: true     # ENABLE complete genealogical analysis
  lineage_output_dir: "lineage_comprehensive"  # Comprehensive lineage data
  enable_diagnostics: true          # ENABLE comprehensive diagnostics analysis
  diagnostics_output_dir: "diagnostics_comprehensive"  # Complete diagnostic reports

# === GENETIC ALGORITHM PARAMETERS ===
genetic_algorithm:
  # Core GA Parameters - optimized for comprehensive overnight testing
  population_size: 150              # Larger population for richer lineage trees
  max_generations: 500              # Overnight run - plenty of generations for thorough testing
  crossover_rate: 0.75               # Moderate crossover for balanced birth method distribution
  mutation_rate: 0.15                # Higher mutation for diversity and lineage complexity
  elitism_rate: 0.10                 # Moderate elitism for survival analysis
  tournament_size: 7                 # Larger tournament for stronger selection pressure

  # Termination Criteria - allow natural evolution
  convergence_threshold: 0.001       # Tight convergence for thorough testing
  early_stopping_patience: 50       # Long patience for comprehensive evolution
  target_fitness: 0.0                # Natural evolution target

  # Advanced Evolution Features - ENABLE ALL for comprehensive testing
  enable_adaptive_parameters: true   # Test adaptive evolution thoroughly
  enable_advanced_crossover: true    # Test all crossover methods
  enable_advanced_mutation: true     # Test all mutation strategies
  stagnation_threshold: 30           # Longer stagnation detection for restart testing
  diversity_threshold: 0.3           # Lower threshold to trigger diversity preservation
  restart_threshold: 40              # Test restart mechanisms multiple times
  restart_ratio: 0.4                 # More aggressive restart for testing

  # Comprehensive Diversity Management - ENABLE ALL
  enable_comprehensive_diversity: true   # Test comprehensive diversity thoroughly
  enable_spatial_diversity: true        # Test spatial diversity extensively

  # Multi-Population Island Model - ENABLE for extensive migration analysis
  enable_island_model: true             # Test island model evolution extensively
  island_model_num_islands: 3           # More islands for complex migration patterns
  island_model_migration_interval: 20   # Migrate every 20 generations for rich patterns
  island_model_migration_rate: 0.10     # Moderate migration for balanced populations

# === FITNESS EVALUATION ===
fitness_evaluation:
  # Comprehensive fitness weights - balanced for thorough component tracking
  color_weight: 0.35                # Primary focus on color matching
  luminance_weight: 0.30             # Strong luminance matching for component analysis
  texture_weight: 0.20               # Substantial texture analysis
  edges_weight: 0.15                 # Edge preservation for structure
  # Sum = 1.0

# === GPU ACCELERATION ===
gpu_acceleration:
  # GPU settings optimized for overnight runs
  enable_gpu: true                   # Enable GPU if available
  gpu_devices: [0, 1]                # Dual GPU support for maximum speed
  gpu_batch_size: 16384              # Large batch size for overnight efficiency
  gpu_memory_limit_gb: 20.0          # Higher memory limit for large batches
  auto_mixed_precision: true         # Enable mixed precision for speed

# === PERFORMANCE SETTINGS ===
performance:
  # Performance settings optimized for overnight comprehensive testing
  enable_parallel_processing: true   # Enable parallel processing
  num_processes: 64                   # High process count for overnight runs
  cache_size_mb: 16384               # Large cache for extensive source collections
  max_source_images: 5000            # Large source image limit for diversity
  preview_frequency: 25              # Preview every 25 generations (manageable frequency)

# === OUTPUT SETTINGS ===
output:
  # High quality output settings for comprehensive analysis
  output_quality: 98                 # Maximum quality for detailed analysis
  enable_edge_blending: true         # Test edge blending feature

# === CHECKPOINT SYSTEM ===
checkpoint_system:
  # Comprehensive crash recovery - critical for overnight runs and resume testing
  enable_checkpoints: true           # ENABLE checkpoint saving
  checkpoint_interval: 25            # Save every 25 generations (80 checkpoints total)
  max_checkpoints: 15                # Keep many checkpoints for resume testing
  checkpoint_dir: "checkpoints_comprehensive"  # Dedicated checkpoint directory

# === ADVANCED DIVERSITY MANAGEMENT ===
diversity_management:
  # Advanced diversity preservation - test extensively
  enable_fitness_sharing: true       # ENABLE fitness sharing
  fitness_sharing_radius: 8.0        # Larger radius for extensive testing
  fitness_sharing_alpha: 1.5         # Stronger sharing function
  enable_crowding_replacement: true  # ENABLE crowding replacement
  crowding_factor: 3.0               # Stronger crowding for diversity preservation

# === INTELLIGENT RESTART SYSTEM ===
intelligent_restart:
  # Automatic population restart - test multiple restart scenarios
  enable_intelligent_restart: true   # ENABLE intelligent restart
  restart_diversity_threshold: 0.12  # Lower threshold for more restart testing
  restart_stagnation_threshold: 60   # Longer stagnation for thorough testing
  restart_elite_preservation: 0.20   # Preserve more elite for analysis

# === DIVERSITY DASHBOARD ===
diversity_dashboard:
  # Real-time diversity monitoring - comprehensive tracking
  enable_diversity_dashboard: true   # ENABLE real-time dashboard
  dashboard_update_interval: 10      # Update every 10 generations for detailed tracking
  dashboard_alert_critical_diversity: 0.08   # Lower critical threshold for testing alerts
  dashboard_alert_low_diversity: 0.15        # Lower warning threshold for more alerts

# === COMPONENT TRACKING ===
component_tracking:
  # Fitness component evolution analysis - comprehensive tracking
  enable_component_tracking: true    # ENABLE component tracking
  track_component_inheritance: true  # ENABLE inheritance analysis for thorough lineage

# === COMPREHENSIVE TESTING FEATURES ===
# This configuration is specifically designed to:
# 1. TEST EVERY FEATURE thoroughly over 6-12 hours
# 2. Generate complex lineage trees with multiple birth methods
# 3. Trigger multiple restart events for restart mechanism testing
# 4. Exercise island model with rich migration patterns
# 5. Test checkpoint save/resume extensively (80+ checkpoints)
# 6. Generate maximum diversity metrics for plot validation
# 7. Test all diagnostic visualizations with rich data
# 8. Validate fitness component tracking over long evolution
# 9. Exercise diversity dashboard alerts and monitoring
# 10. Test network diagrams with complex genealogical relationships
# 11. Preserve 4:3 aspect ratio with 81x61 grid (4,941 tiles)

# === EXPECTED COMPREHENSIVE OUTPUTS ===
# Lineage Analysis (16+ plots):
# - lineage_trees.png - Complex genealogical trees with multiple families
# - population_dynamics.png - Rich birth/death patterns over 2000 generations
# - diversity_evolution.png - All diversity metrics thoroughly tested
# - fitness_lineages.png - Long-term fitness evolution by family
# - birth_method_distribution.png - Comprehensive crossover/mutation analysis
# - age_distribution.png - Individual survival over extended evolution
# - selection_pressure.png - Detailed selection dynamics
# - lineage_dominance.png - Lineage competition and dominance patterns
# - genealogy_network.png - Complex ancestry network visualization
# - migration_patterns.png - Rich inter-island migration analysis
# - survival_curves.png - Comprehensive survival analysis
# - evolutionary_timeline.png - Complete 2000-generation timeline
# - fitness_component_evolution.png - Detailed component tracking
# - fitness_component_inheritance.png - Component heritability analysis
# - component_breeding_success.png - Top performers by component
# - lineage_dashboard.png - Comprehensive lineage overview

# Diagnostics Analysis (10+ plots):
# - dashboard.png - Comprehensive overview with rich data
# - fitness_evolution.png - 2000-generation fitness progression
# - genetic_operations.png - Extensive operation effectiveness analysis
# - performance_metrics.png - Long-run performance statistics
# - population_analysis.png - Extended population dynamics
# - evolution_grid.png - Comprehensive individual progression
# - comprehensive_diversity.png - All diversity metrics extensively tested
# - spatial_diversity.png - Spatial pattern analysis over time
# - advanced_metrics.png - Parameter adaptation over 2000 generations
# - fitness_distribution.png - Population fitness distribution analysis

# Checkpoint Testing:
# - 80+ checkpoints for comprehensive resume testing
# - Test resume from early, middle, and late generations
# - Validate checkpoint collision safety
# - Test deterministic image loading

# Network and Birth Method Testing:
# - Complex genealogy networks with 5 islands
# - Rich migration event history
# - Diverse birth method distribution (crossover/mutation/immigration)
# - Multiple restart events for restart mechanism validation
# - Extensive parent-child relationships for network diagram testing

# === USAGE COMMANDS ===
# Start comprehensive overnight run:
# image-collage generate target.jpg sources/ comprehensive.png --config comprehensive_testing.yaml \
#   --save-animation evolution_comprehensive.gif --save-comparison comparison_comprehensive.jpg \
#   --diagnostics diagnostics_comprehensive/ --track-lineage lineage_comprehensive/ \
#   --save-checkpoints --enable-fitness-sharing --enable-intelligent-restart --enable-diversity-dashboard \
#   --track-components --verbose

# Resume testing examples:
# Resume from early checkpoint (generation 100):
# image-collage resume target.jpg sources/ output_20231201_143022/ --verbose
#
# Resume from middle checkpoint (generation 1000):
# (find appropriate checkpoint file and resume)
#
# Resume from late checkpoint (generation 1800):
# (test near-completion resume functionality)

# === VALIDATION CHECKLIST ===
# After overnight run, validate:
# ✓ All 16 lineage plots generated correctly
# ✓ Network diagram shows complex relationships
# ✓ Birth method distribution accurate across all methods
# ✓ Migration patterns visible in island analysis
# ✓ Multiple restart events occurred and logged
# ✓ All 10 diagnostic plots show rich evolution data
# ✓ Checkpoint files saved correctly (80+ files)
# ✓ Resume functionality works from multiple points
# ✓ Diversity metrics calculated consistently
# ✓ Component tracking shows inheritance patterns
# ✓ Dashboard alerts triggered appropriately
# ✓ Final fitness significantly improved from start
# ✓ No crashes or errors during 6-12 hour run
